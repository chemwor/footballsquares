<section class="pt-5">
  <div class="container position-relative z-2 pt-5 mt-3 mt-sm-4 mt-md-5">
    <div class="row pt-xl-3 pt-xxl-4">
      <div class="col-lg-7 col-xxl-6">
        <h1 class="display-3 text-center text-lg-start">
          Create Your Game Board
        </h1>
      </div>
      <div class="col-lg-5 offset-xxl-1 pt-sm-3">
        <p
          class="fs-lg text-center text-lg-start pb-3 pb-sm-0 pb-md-2 mb-4 mb-sm-5"
        >
          Pick the sport, set the board size, choose the match, and give your board a name. Once you’re done, you’ll have a link ready to share.
        </p>

        <!-- Form -->
        <div class="card border-0 bg-primary py-4 px-xxl-4">
          <form class="card-body" #bjjForm="ngForm" (ngSubmit)="submitForm()" [ngClass]="{ 'was-validated': formSubmitted }" novalidate>
            <h2 class="h3 card-title text-white text-center pb-2 pb-xxl-3">
              Create Your Board
            </h2>

            <!-- Step 1 Only: Game Board Details -->
            <div>
              <h3 class="text-white fs-5 mb-3">Game Board Details</h3>
              <div *ngIf="validationMessage" class="alert alert-warning text-white bg-danger border-0 rounded-2 text-center">
                {{ validationMessage }}
              </div>

              <!-- Sport Dropdown -->
              <div class="mb-3">
                <label class="form-label fs-base text-white" for="sport">Sport</label>
                <select class="form-select form-select-lg text-white" required [(ngModel)]="formData['sport']" name="sport" id="sport" (change)="onSportChange($event)">
                  <option value="" disabled>Select</option>
                  <option *ngFor="let s of sports" [value]="s.id">{{ s.name }}</option>
                </select>
              </div>

              <!-- League Dropdown -->
              <div class="mb-3">
                <label class="form-label fs-base text-white" for="league">League</label>
                <select class="form-select form-select-lg text-white" required [(ngModel)]="formData['league']" name="league" id="league" (change)="onLeagueChange($event)" [disabled]="!filteredLeagues.length">
                  <option value="" disabled>Select</option>
                  <option *ngFor="let league of filteredLeagues" [value]="league.id">{{ league.name }}</option>
                </select>
              </div>

              <!-- Match / Game Dropdown -->
              <div class="mb-3">
                <label class="form-label fs-base text-white" for="match">Match / Game</label>
                <select class="form-select form-select-lg text-white" required [(ngModel)]="formData['match']" name="match" id="match" [disabled]="!filteredGames.length">
                  <option value="" disabled>Select</option>
                  <option *ngFor="let game of filteredGames" [value]="game.id">
                    {{ game.home_team_name }} vs {{ game.away_team_name }} ({{ game.starts_at | date:'short' }})
                  </option>
                </select>
              </div>

              <!-- Total Players -->
              <div class="mb-3">
                <label class="form-label fs-base text-white" for="totalPlayers">Total Players</label>
                <select class="form-select form-select-lg text-white" required [(ngModel)]="formData['totalPlayers']" name="totalPlayers" id="totalPlayers">
                  <option value="100">100 Players (10×10 grid)</option>
                  <option value="50">50 Players (5×10 grid)</option>
                  <option value="25">25 Players (5×5 grid)</option>
                  <option value="10">10 Players (2×5 grid)</option>
                </select>
                <div class="form-text text-white-50 small mt-1">
                  Choose how many squares will be available for players. 100 players shows all individual numbers, 50 players creates a 5×10 grid, 25 players groups numbers together, and 10 players creates a 2×5 grid.
                </div>
              </div>

              <!-- Board Name / Title -->
              <div class="mb-3">
                <label class="form-label fs-base text-white" for="boardName">Board Name / Title</label>
                <input class="form-control form-control-lg text-white" type="text" [(ngModel)]="formData['boardName']" name="boardName" id="boardName" required placeholder="e.g., Sunday Night Game">
              </div>

              <!-- Instructions Textarea -->
              <div class="mb-3">
                <label class="form-label fs-base text-white" for="instructions">Instructions (optional)</label>
                <textarea class="form-control form-control-lg text-white" [(ngModel)]="formData['instructions']" name="instructions" id="instructions" rows="3" maxlength="500" placeholder="Add instructions for your board participants, including how players can get their square accepted (e.g., payment, approval, etc.)"></textarea>
                <div class="form-text text-white-50 small mt-1">
                  You can provide instructions or rules for your board, such as how players can get their square accepted (e.g., payment method, approval process, etc.). (Max 500 characters)
                </div>
              </div>

              <!-- Reverse Squares Option -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" [(ngModel)]="formData['reverseSquares']" name="reverseSquares" id="reverseSquares">
                  <label class="form-check-label text-white fs-base" for="reverseSquares">
                    Reverse Squares
                  </label>
                  <div class="form-text text-white-50 small mt-1">
                    When enabled, a score’s last digits win in both directions. If the result is 4 and 5, the squares for 4×5 and 5×4 are both winners.
                  </div>
                </div>
              </div>

              <!-- Hide Axes Option -->
              <div class="mb-3">
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" [(ngModel)]="formData['hideAxes']" name="hideAxes" id="hideAxes">
                  <label class="form-check-label text-white fs-base" for="hideAxes">
                    Hide Axes
                  </label>
                  <div class="form-text text-white-50 small mt-1">
                    When enabled, the board will not display the axis numbers to participants. Use this for extra challenge or privacy.
                  </div>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="d-flex justify-content-center pt-3">
                <button type="submit" class="btn btn-light w-100 w-sm-auto">
                  Create Board
                </button>
              </div>

            </div>
          </form>
        </div>





      </div>
    </div>
  </div>

  <div
    class="jarallax"
    data-jarallax
    data-speed="0.6"
    style="
      background-image: url(assets/img/dallas.jpg);
    "
    ngJarallax
    [config]="jarallaxConfig"
  >
    <div
      class="d-none d-xxl-block"
      style="height: 830px; margin-top: -470px"
    ></div>
    <div
      class="d-none d-xl-block d-xxl-none"
      style="height: 780px; margin-top: -490px"
    ></div>
    <div
      class="d-none d-lg-block d-xl-none"
      style="height: 700px; margin-top: -560px"
    ></div>
    <div
      class="d-none d-sm-block d-lg-none"
      style="height: 520px; margin-top: -450px"
    ></div>
    <div class="d-sm-none" style="height: 500px; margin-top: -450px"></div>
  </div>
</section>
